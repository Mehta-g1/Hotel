{% extends "base.html" %}
{% load static %}

{% block title %}Billing Dashboard{% endblock %}

{% block content %}
<div class="d-flex">
  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <h4 class="text-center mb-4">ğŸ½ Hotel Admin</h4>
    <a href="#">ğŸ  Dashboard</a>
    <a href="#">ğŸ“‹ Orders</a>
    <a href="#">ğŸ• Dishes</a>
    <a href="#">ğŸ‘¥ Customers</a>
    <a href="#">ğŸ’³ Billing</a>
    <a href="#">ğŸ“¦ Inventory</a>
    <a href="#">ğŸ“Š Reports</a>
    <a href="#">âš™ Settings</a>
    <a href="#">â“ Help</a>
    <a href="#">ğŸšª Logout</a>
  </div>

  <div class="bill">
     <div class="bill-container" id="bill">
      <div class="bill-header">
        <h2>ğŸ´ Royal Palace Hotel</h2>
        <small>123 MG Road, Patna | +91-9876543210</small><br>
        <small>Date: <span id="billDate"></span></small>
      </div>

      <div class="bill-info">
        <p><b>Cashier name :</b> <span id="Cashiername" ></span> </p>
        <p><b>Bill No:</b> <span id="Billno"></span> </p>
      </div>

      <table>
        <thead>
          <tr>
            <th>Sr.</th>
            <th>Item</th>
            <th>Rate</th>
            <th>Qty</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody class="BillInfo">
          
        </tbody>
      </table>

      <table class="totals">
        <tr>
          <td>Total</td>
          <td class="totalss">â‚¹600</td>
        </tr>
        <tr>
          <td>Tax (5%)</td>
          <td class="ttl">â‚¹30</td>
        </tr>
        <tr class="grand">
          <td>Payable</td>
          <td class="Subtotals">â‚¹630</td>
        </tr>
      </table>

      <div class="footer">
        <p>ğŸ™ Thank you! Visit Again</p>
      </div>

      <button class="print-btn" onclick="window.print()">ğŸ–¨ Print Bill</button>
      <button class="backbtn" > Cancel Print</button>
  </div>

  </div>


  <!-- Main Content -->
  <div class="content flex-grow-1" id="content">
    <span class="menu-btn" id="menu-btn">â˜°</span>
    
    <div class="heading-top p-3 rounded-5 col-lg-8 mx-auto">
      <h2>Welcome to Hotel Management Dashboard</h2>
      <p>Your one-stop solution for managing hotel orders.</p>
    </div>

    <div class="container-fluid mt-3">
      <div class="row">
        <!-- Menu & Dishes Section -->
        <div class="col-lg-7">
          <!-- Search Bar -->
          <div class="mb-3" style="position: relative;">
            <input type="text" id="searchBox" class="form-control" placeholder="ğŸ” Search dishes by name, category, or ID...">
            <div id="suggestions" class="list-group"></div>
          </div>
          
          <!-- Dishes -->
          <div id="dishContainer" class="row">
            <!-- Dishes will be dynamically injected here -->
          </div>
        </div>

        <!-- Billing Section -->
        <div class="col-lg-5">
          <div class="bill-section">
            <div class="card bill-box shadow-lg">
              <div class="card-header bill-header">
                <h4>ğŸ´ Royal Palace Hotel</h4>
                <small>123 MG Road, Patna | +91-9876543210</small><br>
                <small id="billDate"></small>
              </div>

              <div class="card-body p-0">
                <form method="POST" action="{% url 'checkout/' %}">
                  {% csrf_token %}
                  <table class="table table-borderless text-center align-middle mb-0">
                    <thead class="table-dark">
                      <tr>
                        <th>Sr.</th>
                        <th>Item</th>
                        <th>Rate</th>
                        <th>Qty</th>
                        <th>Total</th>
                      </tr>
                    </thead>
                    <tbody id="cartTable">
                      <tr><td colspan="5" class="text-muted p-3">No items added yet.</td></tr>
                    </tbody>
                  </table>
                  
                  <div class="card-footer bill-footer">
                    <table class="table table-sm mb-3">
                      <tbody>
                        <tr>
                          <td><b>Total</b></td>
                          <td class="text-end">â‚¹<span id="totalAmount">0.00</span></td>
                        </tr>
                        <tr>
                          <td><b>Tax (5%)</b></td>
                          <td class="text-end">â‚¹<span id="taxAmount">0.00</span></td>
                        </tr>
                        <tr class="fw-bold">
                          <td><b>Payable</b></td>
                          <td class="text-end">â‚¹<span id="payableAmount">0.00</span></td>
                        </tr>
                      </tbody>
                    </table>
                    <button type="submit" class="btn btn-success w-100 PayNow">Pay Now</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<p class="invisible">{{dishes}}</p>

{% if GenerateBill %}
  <p class="showBill">{{GenerateBill}}</p>
  <p>{{total}}</p>
{% endif %}

{% endblock %}